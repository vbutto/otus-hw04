1. Из интернета доступен только frontend:80

Команда на вашей машине:

curl http://$(terraform output -raw frontend_public_ip)
curl http://89.169.152.6


Ожидаемо: HTML с заголовком “FRONTEND OK”.

Скриншот: страница в браузере по http://<frontend_public_ip>/.
http://89.169.152.6


2. Backend (3000) и DB (6000) недоступны снаружи

Попытка с вашей машины:

curl -m 5 http://<frontend_public_ip>:3000 || echo "timeout - ok"
curl -m 5 http://<frontend_public_ip>:6000 || echo "timeout - ok"

curl -m 5 http://89.169.152.6:3000 || echo "timeout - ok"
curl -m 5 http://89.169.152.6:6000 || echo "timeout - ok"


Ожидаемо: timeout/connection refused.

Скриншот: вывод терминала.

3. Frontend → Backend работает

ssh ubuntu@89.169.152.6 curl -m 5 http://10.10.20.22:3000

Ожидаемо: “BACKEND OK”.

Скриншот: вывод curl с фронтенда.


4. Backend → DB работает

Подключаемся по ssh к vm-backend транзитом через vm-bastion, далее обращаемся к http-серверу на vm-db
ssh -J ubuntu@51.250.71.207 ubuntu@10.10.20.22 "curl -m 5 http://10.10.30.33:6000"


5. Frontend → DB запрещён
Подключаемся с рабочей станции по ssh к vm-frontend, с неё обращаемся к http-серверу на vm-db
ssh ubuntu@89.169.152.6 curl -m 5 http://10.10.30.33:6000

